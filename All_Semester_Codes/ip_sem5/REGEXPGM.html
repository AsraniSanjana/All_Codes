<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>RegEx Form</title>
        <style>

.valid {border-color: green;}
.invalid {border-color:red;}

input + p {
    color: orange;
    opacity: 0;
}

input.invalid + p {opacity: 1;}

        </style>

    </head>
    <body>
        <h1>New User Signup</h1>
        <form>

            <input type="text" name="username" placeholder="username">
            <p>Username must be lowercase including numbers and contain 5 - 12 characters</p>

            <input type="text" name="email" placeholder="email">
            <p>Email must be a valid address, e.g. me@mydomain.com</p>

            <input type="password" name="password" placeholder="password">
            <p>Password must alphanumeric (@, _ and - are also allowed) and be 8 - 20 characters</p>

            <input type="text" name="telephone" placeholder="telephone">
            <p>Telephone must be a valid 11 digits telephone number</p>

        </form>
        <script>


            const input_fields = {
            username: /^[a-z\d]{5,12}$/i,
            email: /^([a-z\d\.-]+)@([a-z\d-]+)\.([a-z]{2,8})(\.[a-z]{2,8})?$/,
            password: /^[#\w@_-]{8,20}$/,
            telephone:/^\d{11}$/,
            }
            function validate(field,regex){
                regex.test(field.value) ? field.className = 'valid' : field.className = 'invalid';
            }
            // const validate = (field, regex) => {
            // regex.test(field.value) ? field.className = 'valid' : field.className = 'invalid';
            // }


            let keys = document.querySelectorAll('input');
keys.forEach(item => item.addEventListener(
  'keyup', e => {
    validate(e.target, input_fields[e.target.attributes.name.value])
  }
));

            </script>
    </body>
</html>